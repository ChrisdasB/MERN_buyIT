/* Components that accepts data for one item and displays it in a card */
import { useNavigate } from "react-router-dom";
import { useState } from "react";

const ItemPreview = ({
  imageLink,
  brandName,
  itemName,
  price,
  description,
  descriptionHeader,
  specs,
  _id,
}) => {
  // Init navigate
  const navigate = useNavigate();

  // Image Hook
  const [imgLoaded, setImageLoaded] = useState(false);

  // Handles navigation if the user clicks on the card
  const handleItemNavigation = () => {
    navigate("/item", {
      state: {
        imageLink,
        brandName,
        itemName,
        price,
        description,
        descriptionHeader,
        specs,
        _id,
      },
    });
  };

  /* Triggered by the onLoad attribut of the item image. Sets the image-state to true */
  const handleImageLoaded = () => {
    setImageLoaded(true);
  };

  return (
    <>
      {/* The whole card is clickable */}
      <a
        onClick={() => handleItemNavigation()}
        name="item-preview"
        className="item-preview grid grid-rows-8 pt-2 lg:my-10 my-2 mx-1 md:shadow-none shadow-md"
      >
        <div
          name="item-preview-img"
          className={"text-white row-span-4 flex items-center justify-center"}
        >
          {/* If image is loaded, render image. Else render placeholder image */}
          {imgLoaded ? (
            <img
              alt={"Product image for " + itemName}
              className="self-start p-2 image-active"
              onLoad={handleImageLoaded}
              loading="lazy"
              src={imageLink}
            />
          ) : (
            <img
              alt="Placeholder image."
              className="self-start image-active"
              onLoad={handleImageLoaded}
              loading="lazy"
              src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAAAXNSR0IArs4c6QAAGA1JREFUeF7t1rFKZGEQhNGrgYGJyLz/E4qRGCjCyG6wsBgohciUdTae6/59uoPv6uXl5Xz4R4AAAQIECEwJXAmAqX0blgABAgQI/BUQAA6BAAECBAgMCgiAwaUbmQABAgQICAA3QIAAAQIEBgUEwODSjUyAAAECBASAGyBAgAABAoMCAmBw6UYmQIAAAQICwA0QIECAAIFBAQEwuHQjEyBAgAABAeAGCBAgQIDAoIAAGFy6kQkQIECAgABwAwQIECBAYFBAAAwu3cgECBAgQEAAuAECBAgQIDAoIAAGl25kAgQIECAgANwAAQIECBAYFBAAg0s3MgECBAgQEABugAABAgQIDAoIgMGlG5kAAQIECAgAN0CAAAECBAYFBMDg0o1MgAABAgQEgBsgQIAAAQKDAgJgcOlGJkCAAAECAsANECBAgACBQQEBMLh0IxMgQIAAAQHgBggQIECAwKCAABhcupEJECBAgIAAcAMECBAgQGBQQAAMLt3IBAgQIEBAALgBAgQIECAwKCAABpduZAIECBAgIADcAAECBAgQGBQQAINLNzIBAgQIEBAAboAAAQIECAwKCIDBpRuZAAECBAgIADdAgAABAgQGBQTA4NKNTIAAAQIEBIAbIECAAAECgwICYHDpRiZAgAABAgLADRAgQIAAgUEBATC4dCMTIECAAAEB4AYIECBAgMCggAAYXLqRCRAgQICAAHADBAgQIEBgUEAADC7dyAQIECBAQAC4AQIECBAgMCggAAaXbmQCBAgQICAA3AABAgQIEBgUEACDSzcyAQIECBAQAG6AAAECBAgMCgiAwaUbmQABAgQICAA3QIAAAQIEBgUEwODSjUyAAAECBASAGyBAgAABAoMCAmBw6UYmQIAAAQICwA0QIECAAIFBAQEwuHQjEyBAgAABAeAGCBAgQIDAoIAAGFy6kQkQIECAgABwAwQIECBAYFBAAAwu3cgECBAgQEAAuAECBAgQIDAoIAAGl25kAgQIECAgANwAAQIECBAYFBAAg0s3MgECBAgQEABugAABAgQIDAoIgMGlG5kAAQIECAgAN0CAAAECBAYFBMDg0o1MgAABAgQEgBsgQIAAAQKDAgJgcOlGJkCAAAECAsANECBAgACBQQEBMLh0IxMgQIAAAQHgBggQIECAwKCAABhcupEJECBAgIAAcAMECBAgQGBQQAAMLt3IBAgQIEBAALgBAgQIECAwKCAABpduZAIECBAgIADcAAECBAgQGBQQAINLNzIBAgQIEBAAboAAAQIECAwKCIDBpRuZAAECBAgIADdAgAABAgQGBQTA4NKNTIAAAQIEBIAbIECAAAECgwICYHDpRiZAgAABAgLADRAgQIAAgUEBATC4dCMTIECAAAEB4AYIECBAgMCggAAYXLqRCRAgQICAAHADBAgQIEBgUEAADC7dyAQIECBAQAC4AQIECBAgMCggAAaXbmQCBAgQICAA3AABAgQIEBgUEACDSzcyAQIECBAQAG6AAAECBAgMCgiAwaUbmQABAgQICAA3QIAAAQIEBgUEwODSjUyAAAECBASAGyBAgAABAoMCAmBw6UYmQIAAAQICwA0QIECAAIFBAQEwuHQjEyBAgAABAeAGCBAgQIDAoIAAGFy6kQkQIECAgABwAwQIECBAYFBAAAwu3cgECBAgQEAAuAECBAgQIDAoIAAGl25kAgQIECAgANwAAQIECBAYFBAAg0s3MgECBAgQEABugAABAgQIDAoIgMGlG5kAAQIECAgAN0CAAAECBAYFBMDg0o1MgAABAgQEgBsgQIAAAQKDAgJgcOlGJkCAAAECAsANECBAgACBQQEBMLh0IxMgQIAAAQHgBggQIECAwKCAABhcupEJECBAgIAAcAMECBAgQGBQQAAMLt3IBAgQIEBAALgBAgQIECAwKCAABpduZAIECBAgIADcAAECBAgQGBQQAINLNzIBAgQIEBAAboAAAQIECAwKCIDBpRuZAAECBAgIADdAgAABAgQGBQTA4NKNTIAAAQIEBIAbIECAAAECgwICYHDpRiZAgAABAgLADRAgQIAAgUEBATC4dCMTIECAAAEB4AYIECBAgMCggAAYXLqRCRAgQICAAHADBAgQIEBgUEAADC7dyAQIECBAQAC4AQIECBAgMCggAAaXbmQCBAgQICAA3AABAgQIEBgUEACDSzcyAQIECBAQAG6AAAECBAgMCgiAwaUbmQABAgQICAA3QIAAAQIEBgUEwODSjUyAAAECBASAGyBAgAABAoMCAmBw6UYmQIAAAQICwA0QIECAAIFBAQEwuHQjEyBAgAABAeAGCBAgQIDAoIAAGFy6kQkQIECAgABwAwQIECBAYFBAAAwu3cgECBAgQEAAuAECBAgQIDAoIAAGl25kAgQIECAgANwAAQIECBAYFBAAg0s3MgECBAgQEABugAABAgQIDAoIgMGlG5kAAQIECAgAN0CAAAECBAYFBMDg0o1MgAABAgQEgBsgQIAAAQKDAgJgcOlGJkCAAAECAsANECBAgACBQQEBMLh0IxMgQIAAAQHgBggQIECAwKCAABhcupEJECBAgIAAcAMECBAgQGBQQAAMLt3IBAgQIEBAALgBAgQIECAwKCAABpduZAIECBAgIADcAAECBAgQGBQQAINLNzIBAgQIEBAAboAAAQIECAwKCIDBpRuZAAECBAgIADdAgAABAgQGBQTA4NKNTIAAAQIEBIAbIECAAAECgwICYHDpRiZAgAABAgLADRAgQIAAgUEBATC4dCMTIECAAAEB4AYIECBAgMCggAAYXLqRCRAgQICAAHADBAgQIEBgUEAADC7dyAQIECBAQAC4AQIECBAgMCggAAaXbmQCBAgQICAA3AABAgQIEBgUEACDSzcyAQIECBAQAG6AAAECBAgMCgiAwaUbmQABAgQICAA3QIAAAQIEBgUEwODSjUyAAAECBASAGyBAgAABAoMCAmBw6UYmQIAAAQICwA0QIECAAIFBAQEwuHQjEyBAgAABAeAGCBAgQIDAoIAAGFy6kQkQIECAgABwAwQIECBAYFBAAAwu3cgECBAgQEAAuAECBAgQIDAoIAAGl25kAgQIECAgANwAAQIECBAYFBAAg0s3MgECBAgQEABugAABAgQIDAoIgMGlG5kAAQIECAgAN0CAAAECBAYFBMDg0o1MgAABAgQEgBsgQIAAAQKDAgJgcOlGJkCAAAECAsANECBAgACBQQEBMLh0IxMgQIAAAQHgBggQIECAwKCAABhcupEJECBAgIAAcAMECBAgQGBQQAAMLt3IBAgQIEBAALgBAgQIECAwKCAABpduZAIECBAgIADcAAECBAgQGBQQAINLNzIBAgQIEBAAboAAAQIECAwKCIDBpRuZAAECBAgIADdAgAABAgQGBQTA4NKNTIAAAQIEBIAbIECAAAECgwICYHDpRiZAgAABAgLADRAgQIAAgUEBATC4dCMTIECAAAEB4AYIECBAgMCggAAYXLqRCRAgQICAAHADBAgQIEBgUEAADC7d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"
            />
          )}
        </div>
        {/* Item-Name */}
        <div
          name="item-name"
          style={{ height: "20px", overflow: "hidden" }}
          className="flex items-center justify-start"
        >
          <h5
            style={{
              whiteSpace: "nowrap",
              overflow: "hidden",
              textOverflow: "ellipsis",
            }}
            className="preview-item-name px-4 font-bold"
          >
            {itemName}
          </h5>
        </div>
        {/* Item-Brand */}
        <div
          name="item-brand"
          style={{ height: "20px", overflow: "hidden" }}
          className="flex items-center justify-start"
        >
          <h5
            style={{
              whiteSpace: "nowrap",
              overflow: "hidden",
              textOverflow: "ellipsis",
            }}
            className="preview-item-name px-4"
          >
            {brandName}
          </h5>
        </div>
        {/* Item-Price */}
        <div className="border-t my-1 border-purple-600 self-end mx-4"></div>
        <div
          name="item-price"
          className="grid place-content-start place-items-end mb-2"
        >
          <h4 className="text-lg px-4">
            <small>$</small> {price}.-
          </h4>
        </div>
      </a>
    </>
  );
};

export default ItemPreview;
